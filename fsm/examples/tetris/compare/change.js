__Hibernation__.obj_ref = new Array();
__Hibernation__.timerid_ref = new Array();
(function(){var ind=[1,]; for (var i=0;i<ind.length;++i){ __Hibernation__.obj_ref[ind[i]]={};}} )();

// [2][5][6][7][8][4][10][11][12][13][9][15][16][17][18][14][20][21][22][23][19][25][26][27][28][24][30][31][32][33][29][35][36][37][38][34][3][39][40][41][42][43][44][45][46][47][48][49][50][51][52][53][54][55][56][57][58][59][60][61][62][63][64][65][66][67][68][69][70][71][72][73][74][75][76][77][78][79][80][81][82][83][84][85][86][87][88][89][90][91][92][93][94][95][96][97][98][99][100][101][102][103][104][105][1][0][106][107][108][109]

// true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true
/* 2 needs undefined, incomplete: false */
__Hibernation__.obj_ref[2]=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0];
/* 5 needs undefined, incomplete: false */
__Hibernation__.obj_ref[5]=[-1,1];
/* 6 needs undefined, incomplete: false */
__Hibernation__.obj_ref[6]=[0,1];
/* 7 needs undefined, incomplete: false */
__Hibernation__.obj_ref[7]=[1,1];
/* 8 needs undefined, incomplete: false */
__Hibernation__.obj_ref[8]=[0,0];
/* 4 needs [5,6,7,8], incomplete: false */
__Hibernation__.obj_ref[4]=[__Hibernation__.obj_ref[5],__Hibernation__.obj_ref[6],__Hibernation__.obj_ref[7],__Hibernation__.obj_ref[8]];
/* 10 needs undefined, incomplete: false */
__Hibernation__.obj_ref[10]=[-1,0];
/* 11 needs undefined, incomplete: false */
__Hibernation__.obj_ref[11]=[0,0];
/* 12 needs undefined, incomplete: false */
__Hibernation__.obj_ref[12]=[1,0];
/* 13 needs undefined, incomplete: false */
__Hibernation__.obj_ref[13]=[2,0];
/* 9 needs [10,11,12,13], incomplete: false */
__Hibernation__.obj_ref[9]=[__Hibernation__.obj_ref[10],__Hibernation__.obj_ref[11],__Hibernation__.obj_ref[12],__Hibernation__.obj_ref[13]];
/* 15 needs undefined, incomplete: false */
__Hibernation__.obj_ref[15]=[-1,-1];
/* 16 needs undefined, incomplete: false */
__Hibernation__.obj_ref[16]=[-1,0];
/* 17 needs undefined, incomplete: false */
__Hibernation__.obj_ref[17]=[0,0];
/* 18 needs undefined, incomplete: false */
__Hibernation__.obj_ref[18]=[1,0];
/* 14 needs [15,16,17,18], incomplete: false */
__Hibernation__.obj_ref[14]=[__Hibernation__.obj_ref[15],__Hibernation__.obj_ref[16],__Hibernation__.obj_ref[17],__Hibernation__.obj_ref[18]];
/* 20 needs undefined, incomplete: false */
__Hibernation__.obj_ref[20]=[1,-1];
/* 21 needs undefined, incomplete: false */
__Hibernation__.obj_ref[21]=[-1,0];
/* 22 needs undefined, incomplete: false */
__Hibernation__.obj_ref[22]=[0,0];
/* 23 needs undefined, incomplete: false */
__Hibernation__.obj_ref[23]=[1,0];
/* 19 needs [20,21,22,23], incomplete: false */
__Hibernation__.obj_ref[19]=[__Hibernation__.obj_ref[20],__Hibernation__.obj_ref[21],__Hibernation__.obj_ref[22],__Hibernation__.obj_ref[23]];
/* 25 needs undefined, incomplete: false */
__Hibernation__.obj_ref[25]=[0,-1];
/* 26 needs undefined, incomplete: false */
__Hibernation__.obj_ref[26]=[1,-1];
/* 27 needs undefined, incomplete: false */
__Hibernation__.obj_ref[27]=[-1,0];
/* 28 needs undefined, incomplete: false */
__Hibernation__.obj_ref[28]=[0,0];
/* 24 needs [25,26,27,28], incomplete: false */
__Hibernation__.obj_ref[24]=[__Hibernation__.obj_ref[25],__Hibernation__.obj_ref[26],__Hibernation__.obj_ref[27],__Hibernation__.obj_ref[28]];
/* 30 needs undefined, incomplete: false */
__Hibernation__.obj_ref[30]=[-1,-1];
/* 31 needs undefined, incomplete: false */
__Hibernation__.obj_ref[31]=[0,-1];
/* 32 needs undefined, incomplete: false */
__Hibernation__.obj_ref[32]=[0,0];
/* 33 needs undefined, incomplete: false */
__Hibernation__.obj_ref[33]=[1,0];
/* 29 needs [30,31,32,33], incomplete: false */
__Hibernation__.obj_ref[29]=[__Hibernation__.obj_ref[30],__Hibernation__.obj_ref[31],__Hibernation__.obj_ref[32],__Hibernation__.obj_ref[33]];
/* 35 needs undefined, incomplete: false */
__Hibernation__.obj_ref[35]=[0,-1];
/* 36 needs undefined, incomplete: false */
__Hibernation__.obj_ref[36]=[1,-1];
/* 37 needs undefined, incomplete: false */
__Hibernation__.obj_ref[37]=[0,0];
/* 38 needs undefined, incomplete: false */
__Hibernation__.obj_ref[38]=[1,0];
/* 34 needs [35,36,37,38], incomplete: false */
__Hibernation__.obj_ref[34]=[__Hibernation__.obj_ref[35],__Hibernation__.obj_ref[36],__Hibernation__.obj_ref[37],__Hibernation__.obj_ref[38]];
/* 3 needs [4,9,14,19,24,29,34], incomplete: false */
__Hibernation__.obj_ref[3]=[__Hibernation__.obj_ref[4],__Hibernation__.obj_ref[9],__Hibernation__.obj_ref[14],__Hibernation__.obj_ref[19],__Hibernation__.obj_ref[24],__Hibernation__.obj_ref[29],__Hibernation__.obj_ref[34]];
/* 39 needs undefined, incomplete: false */
__Hibernation__.obj_ref[39]=[2,0,5,1,3,4];
/* 40 needs undefined, incomplete: false */
__Hibernation__.obj_ref[40]=[undefined /* lazy init */,undefined /* lazy init */,undefined /* lazy init */,undefined /* lazy init */];
/* 41 needs undefined, incomplete: false */
__Hibernation__.obj_ref[41]=[undefined /* lazy init */,undefined /* lazy init */,undefined /* lazy init */,undefined /* lazy init */];
/* 42 needs undefined, incomplete: false */
__Hibernation__.obj_ref[42]=function (msg) {
            if(window["console"] && console["log"]){
                console.log(msg);
            }
        };
/* 43 needs undefined, incomplete: false */
__Hibernation__.obj_ref[43]=function () {
            this.canvas = document.getElementById("canvas");
            this.initBoard();
            this.initInfo();
            this.initLevelScores();
            this.initShapes();
            this.bindKeyEvents();
            this.bindControlEvents();
            this.play();
            
        };
/* 44 needs undefined, incomplete: false */
__Hibernation__.obj_ref[44]=function () {
            this.boardHeight = this.canvasHeight/this.pSize;
            this.boardWidth = this.canvasWidth/this.pSize;
            var s = this.boardHeight * this.boardWidth;
            for (var i=0;i<s;i++) {
                this.board.push(0);
            }
            //this.boardDiv = document.getElementById('board'); // for debugging;
        };
/* 45 needs undefined, incomplete: false */
__Hibernation__.obj_ref[45]=function () {
            this.nextShapeDisplay = document.getElementById("next_shape");
            this.levelDisplay = document.getElementById("level").getElementsByTagName("span")[0];
            this.timeDisplay = document.getElementById("time").getElementsByTagName("span")[0];
            this.scoreDisplay = document.getElementById("score").getElementsByTagName("span")[0];
            this.linesDisplay = document.getElementById("lines").getElementsByTagName("span")[0];
            this.setInfo('time');
            this.setInfo('score');
            this.setInfo('level');
            this.setInfo('lines');
        };
/* 46 needs undefined, incomplete: false */
__Hibernation__.obj_ref[46]=function () {
            this.curSqs = [];
            this.curComplete = false;
            this.shiftTempShapes();
            this.curShapeIndex = this.tempShapes[0];
            this.curShape = this.shapes[this.curShapeIndex];
            this.initNextShape();
            this.setCurCoords(this.spawnX,this.spawnY);
            this.drawShape(this.curX,this.curY,this.curShape);
        };
/* 47 needs undefined, incomplete: false */
__Hibernation__.obj_ref[47]=function () {
            if (typeof this.tempShapes[1] === 'undefined') {this.initTempShapes();}
            try {
                this.nextShapeIndex = this.tempShapes[1];
                this.nextShape = this.shapes[this.nextShapeIndex];
                this.drawNextShape();
            } catch(e) {
                throw new Error("Could not create next shape. " + e);
            }
        };
/* 48 needs undefined, incomplete: false */
__Hibernation__.obj_ref[48]=function () {
            this.tempShapes = [];
            for (var i = 0;i<this.shapes.length;i++) {
                this.tempShapes.push(i);
            }
            var k = this.tempShapes.length;
            while ( --k ) { //Fisher Yates Shuffle
                var j = Math.floor( Math.random() * ( k + 1 ) );
                var tempk = this.tempShapes[k];
                var tempj = this.tempShapes[j];
                this.tempShapes[k] = tempj;
                this.tempShapes[j] = tempk;
            }
        };
/* 49 needs undefined, incomplete: false */
__Hibernation__.obj_ref[49]=function () {
            try {
                if (typeof this.tempShapes === 'undefined' || this.tempShapes === null) {
                    this.initTempShapes();
                } else {
                    this.tempShapes.shift();
                }
            } catch(e) {
                throw new Error("Could not shift or init tempShapes:  " + e);
            }
        };
/* 50 needs undefined, incomplete: false */
__Hibernation__.obj_ref[50]=function () {
                var me = this;
                var tLoop = function() {
                    me.incTime();
                    me.timer = setTimeout(tLoop,2000);
                };
                this.timer = setTimeout(tLoop,2000);
        };
/* 51 needs undefined, incomplete: false */
__Hibernation__.obj_ref[51]=function () {
            var c = 1;
            for (var i=1;i<=this.numLevels;i++) {
                this['level' + i] = [c * 1000,40*i,5*i]; // for next level, row score, p score, TODO: speed
                c = c + c;
            }
        };
/* 52 needs undefined, incomplete: false */
__Hibernation__.obj_ref[52]=function (el) {
            this[el + 'Display'].innerHTML = this[el];
        };
/* 53 needs undefined, incomplete: false */
__Hibernation__.obj_ref[53]=function () {
                var ns = [];
                for (var i=0;i<this.nextShape.length;i++) {
                    ns[i] = this.createSquare(this.nextShape[i][0] + 2,this.nextShape[i][1] + 2,this.nextShapeIndex);
                }
                this.nextShapeDisplay.innerHTML = '';
                for (var k=0;k<ns.length;k++) {
                    this.nextShapeDisplay.appendChild(ns[k]);
                }
        };
/* 54 needs undefined, incomplete: false */
__Hibernation__.obj_ref[54]=function (x, y, p) {
            for (var i=0;i<p.length;i++) {
                var newX = p[i][0] + x;
                var newY = p[i][1] + y;
                this.curSqs[i] = this.createSquare(newX,newY,this.curShapeIndex);
            }
            for (var k=0;k<this.curSqs.length;k++) {
                this.canvas.appendChild(this.curSqs[k]);
            }
        };
/* 55 needs undefined, incomplete: false */
__Hibernation__.obj_ref[55]=function (x, y, type) {
            var el = document.createElement('div');
            el.className = 'square type'+type;
            el.style.left = x * this.pSize + 'px';
            el.style.top = y * this.pSize + 'px';
            return el;
        };
/* 56 needs undefined, incomplete: false */
__Hibernation__.obj_ref[56]=function () {
            var me = this;
            this.curSqs.eachdo(function() {
                me.canvas.removeChild(this);
            });
            this.curSqs = [];
        };
/* 57 needs undefined, incomplete: false */
__Hibernation__.obj_ref[57]=function (x, y) {
            this.curX = x;
            this.curY = y;
        };
/* 58 needs undefined, incomplete: false */
__Hibernation__.obj_ref[58]=function () {
            var me = this;
            var event = "keypress";
            if (this.isSafari() || this.isIE()) {event = "keydown";}
            var cb = function(e) {
                me.handleKey(e);
            };
            if (window.addEventListener) {
                document.addEventListener(event, cb, false);
            } else {
                document.attachEvent('on' + event,cb);
            }
        };
/* 59 needs undefined, incomplete: false */
__Hibernation__.obj_ref[59]=function () {
            var classes = this.controls.className.split(" "),
                cls_length = classes.length,
                hasClass = false,
                newClassList = [];
            this.log(classes);
            while(cls_length--){
                className = classes[cls_length];
                if(className == "show_controls"){
                    hasClass = true;
                } else {
                    newClassList.push(className);
                }
            }
            if(hasClass == false){
                newClassList.push("show_controls");
            }
            this.log(newClassList.join(" "));
            this.controls.className = newClassList.join(" ");
                
            
        };
/* 60 needs undefined, incomplete: false */
__Hibernation__.obj_ref[60]=function () {
            var me = this,
                event = "click",
                cb = function(e) {
                    me.handleControl(e);
                },
                controls = document.getElementById("controls");
            this.controls = controls;
            if (window.addEventListener) {
                this.controls.addEventListener(event, cb, false);
            } else {
                this.controls.attachEvent('on' + event,cb);
            }
        };
/* 61 needs undefined, incomplete: false */
__Hibernation__.obj_ref[61]=function (e) {
            var classes = e.target.className.split(" "),
                cls_length = classes.length,
                dir = '';
            this.log(classes);
            while(cls_length--){
                class_name = classes[cls_length];
                switch (class_name) {
                    case "move_left":
                        this.move('L');
                        break;
                    case "move_rotate": // rotate
                        this.move('RT');
                        break;
                    case "move_right":
                        this.move('R');
                        break;
                    case "move_down":
                        this.move('D');
                        break;
                    case "move_pause": //esc:pause
                        this.togglePause();
                        break;
                    case "move_show_controls": //esc:pause
                        this.log("move_show_controls");
                        this.toggleControls();
                        break;
                    default:
                        break;
                }
            }
        };
/* 62 needs undefined, incomplete: false */
__Hibernation__.obj_ref[62]=function (e) {
            var c = this.whichKey(e);
            var dir = '';
            switch (c) {
                case 37:
                    this.move('L');
                    break;
                case 38: // rotate
                    this.move('RT');
                    break;
                case 39:
                    this.move('R');
                    break;
                case 40:
                    this.move('D');
                    break;
                case 27: //esc:pause
                    this.togglePause();
                    break;
                default:
                    break;
            }
        };
/* 63 needs undefined, incomplete: false */
__Hibernation__.obj_ref[63]=function (e) {
            var c;
            if (window.event) {c = window.event.keyCode;}
            else if (e) {c = e.keyCode;}
            return c;
        };
/* 64 needs undefined, incomplete: false */
__Hibernation__.obj_ref[64]=function () {
            this.time++;
            this.setInfo('time');
        };
/* 65 needs undefined, incomplete: false */
__Hibernation__.obj_ref[65]=function (amount) {
            this.score = this.score + amount;
            this.setInfo('score');
        };
/* 66 needs undefined, incomplete: false */
__Hibernation__.obj_ref[66]=function () {
            this.level++;
            this.speed = this.speed - 75;
            this.setInfo('level');
        };
/* 67 needs undefined, incomplete: false */
__Hibernation__.obj_ref[67]=function (num) {
            this.lines += num;
            this.setInfo('lines');
        };
/* 68 needs undefined, incomplete: false */
__Hibernation__.obj_ref[68]=function (args) {
            var lines = args.lines || 0;
            var shape = args.shape || false;
            var speed = args.speed || 0;
            var score = 0;
            
            if (lines > 0) {
                score += lines*this["level" + this.level][1]; 
                this.incLines(lines);
            }
            if (shape === true) {score += shape*this["level"+this.level][2];}
            // if (speed > 0) {score += speed*this["level"+this.level[3]];} TODO: implement speed score
            this.incScore(score);
        };
/* 69 needs undefined, incomplete: false */
__Hibernation__.obj_ref[69]=function () {
            if (this.score >= this['level' + this.level][0]) {
                this.incLevel();
            }
        };
/* 70 needs undefined, incomplete: false */
__Hibernation__.obj_ref[70]=function () {
            this.clearTimers();
            this.canvas.innerHTML = "<h1>GAME OVER</h1>";
        };
/* 71 needs undefined, incomplete: false */
__Hibernation__.obj_ref[71]=function () { //gameLoop
            var me = this;
            if (this.timer === null) {
                this.initTimer();
            }
            var gameLoop = function() {
                me.move('D');
                if(me.curComplete) {
                    me.markBoardShape(me.curX,me.curY,me.curShape);
                    me.curSqs.eachdo(function() {
                        me.sqs.push(this);
                    });
                    me.calcScore({shape:true});
                    me.checkRows();
                    me.checkScore();
                    me.initShapes();
                    me.play();
                } else {
                    me.pTimer = setTimeout(gameLoop,me.speed);
                }
            };
            this.pTimer = setTimeout(gameLoop,me.speed);
            this.isActive = 1;
        };
/* 72 needs undefined, incomplete: false */
__Hibernation__.obj_ref[72]=function () {
            if (this.isActive === 1) {
                this.clearTimers();
                this.isActive = 0;
            } else {this.play();} 
        };
/* 73 needs undefined, incomplete: false */
__Hibernation__.obj_ref[73]=function () {
            clearTimeout(this.timer);
            clearTimeout(this.pTimer);
            this.timer = null;
            this.pTimer = null;
        };
/* 74 needs undefined, incomplete: false */
__Hibernation__.obj_ref[74]=function (dir) {
            var s = '';
            var me = this;
            var tempX = this.curX;
            var tempY = this.curY;
            switch(dir) {
                case 'L':
                    s = 'left';
                    tempX -= 1;
                    break;
                case 'R':
                    s = 'left';
                    tempX += 1;
                    break;
                case 'D':
                    s = 'top';
                    tempY += 1;
                    break;
                case 'RT':
                    this.rotate();
                    return true;
                    break;
                default:
                    throw new Error('wtf');
                    break;       
            }
            if (this.checkMove(tempX,tempY,this.curShape)) {
                this.curSqs.eachdo(function(i) {
                    var l = parseInt(this.style[s],10);
                    dir === 'L' ? l-=me.pSize:l+=me.pSize;
                    this.style[s] = l + 'px';
                    return true;
                });
                this.curX = tempX;
                this.curY = tempY;
            } else if (dir === 'D') { //if move is invalid and down, piece must be complete
                if (this.curY === 1 || this.time === this.maxTime) {this.gameOver(); return false;}
                this.curComplete = true;
            }
            return true;
        };
/* 75 needs undefined, incomplete: false */
__Hibernation__.obj_ref[75]=function () {
            if (this.curShapeIndex !== 6) { // if not the square
                var temp = [];
                this.curShape.eachdo(function() {
                    temp.push([this[1] * -1,this[0]]); // (-y,x)
                });
                if (this.checkMove(this.curX,this.curY,temp)) {
                    this.curShape = temp;
                    this.removeCur();
                    this.drawShape(this.curX,this.curY,this.curShape);
                } else { throw new Error("Could not rotate!");}
            }
        };
/* 76 needs undefined, incomplete: false */
__Hibernation__.obj_ref[76]=function (x, y, p) {
            if (this.isOB(x,y,p) || this.isCollision(x,y,p)) {return false;}
            return true;
        };
/* 77 needs undefined, incomplete: false */
__Hibernation__.obj_ref[77]=function (x, y, p) {
            var me = this;
            var bool = false;
            p.eachdo(function() {
                var newX = this[0] + x;
                var newY = this[1] + y;
                if (me.boardPos(newX,newY) === 1) {bool = true;}
            });
            return bool;
        };
/* 78 needs undefined, incomplete: false */
__Hibernation__.obj_ref[78]=function (x, y, p) { 
            var w = this.boardWidth - 1;
            var h = this.boardHeight - 1;
            var bool = false;
            p.eachdo(function() {
                var newX = this[0] + x;
                var newY = this[1] + y;
                if(newX < 0 || newX > w || newY < 0 || newY > h) {bool = true;}
            });
            return bool;
        };
/* 79 needs undefined, incomplete: false */
__Hibernation__.obj_ref[79]=function (y) { //Empty, Full, or Used
            var c = 0;
            for (var x=0;x<this.boardWidth;x++) {
                if (this.boardPos(x,y) === 1) {c = c + 1;}
            }
            if (c === 0) {return 'E';}
            if (c === this.boardWidth) {return 'F';}
            return 'U';
        };
/* 80 needs undefined, incomplete: false */
__Hibernation__.obj_ref[80]=function () { //does check for full lines, removes them, and shifts everything else down
            /*var me = this;
            var memo = 0;
            var checks = (function() {
                    me.curShape.eachdo(function() {
                        if ((this[1] + me.curY) > memo) {
                            return this[1];
                        }
                    });                                     
            })();
            
            console.log(checks);*/
            
            
            var me = this;
            var start = this.boardHeight;
            this.curShape.eachdo(function() {
                var n = this[1] + me.curY;
                //this.log(n);
                if (n < start) {start = n;}
            });
            this.log(start);

            

            var c = 0;
            var stopCheck = false;
            for (var y=this.boardHeight - 1;y>=0;y--) {
                    switch(this.getRowState(y)) {
                        case 'F':
                            this.removeRow(y);
                            c++;
                            break;
                        case 'E':
                            if (c === 0) {  
                                stopCheck = true;
                            }
                            break;
                        case 'U':
                            if (c > 0) {
                                this.shiftRow(y,c);
                            }
                            break;
                        default:
                            break;
                    }
                    if (stopCheck === true) {
                        break;
                    }
            }
            if (c > 0) {
                this.calcScore({lines:c});
            }
        };
/* 81 needs undefined, incomplete: false */
__Hibernation__.obj_ref[81]=function (y, amount) {
            var me = this;
            for (var x=0;x<this.boardWidth;x++) {
                this.sqs.eachdo(function() {
                    if (me.isAt(x,y,this)) {
                        me.setBlock(x,y+amount,this);
                    }
                });
            }
            me.emptyBoardRow(y);
        };
/* 82 needs undefined, incomplete: false */
__Hibernation__.obj_ref[82]=function (y) { // empties a row in the board array
            for (var x=0;x<this.boardWidth;x++) {
                this.markBoardAt(x,y,0);
            }
        };
/* 83 needs undefined, incomplete: false */
__Hibernation__.obj_ref[83]=function (y) {
            for (var x=0;x<this.boardWidth;x++) {
                this.removeBlock(x,y);
            }
        };
/* 84 needs undefined, incomplete: false */
__Hibernation__.obj_ref[84]=function (x, y) {
            var me = this;
            this.markBoardAt(x,y,0);
            this.sqs.eachdo(function(i) {
                if (me.getPos(this)[0] === x && me.getPos(this)[1] === y) {
                    me.canvas.removeChild(this);
                    me.sqs.splice(i,1);
                }
            });
        };
/* 85 needs undefined, incomplete: false */
__Hibernation__.obj_ref[85]=function (x, y, block) {
            this.markBoardAt(x,y,1);
            var newX = x * this.pSize;
            var newY = y * this.pSize;
            block.style.left = newX + 'px';
            block.style.top = newY + 'px';
        };
/* 86 needs undefined, incomplete: false */
__Hibernation__.obj_ref[86]=function (x, y, block) { // is given block at x,y?
            if(this.getPos(block)[0] === x && this.getPos(block)[1] === y) {return true;}
            return false;
        };
/* 87 needs undefined, incomplete: false */
__Hibernation__.obj_ref[87]=function (block) { // returns [x,y] block position
            var p = [];
            p.push(parseInt(block.style.left,10)/this.pSize);
            p.push(parseInt(block.style.top,10)/this.pSize);
            return p;
        };
/* 88 needs undefined, incomplete: false */
__Hibernation__.obj_ref[88]=function (x, y) { // returns board array index for x,y coords
            return x + (y*this.boardWidth);
        };
/* 89 needs undefined, incomplete: false */
__Hibernation__.obj_ref[89]=function (x, y) { // returns value at this board position
            return this.board[x+(y*this.boardWidth)];
        };
/* 90 needs undefined, incomplete: false */
__Hibernation__.obj_ref[90]=function (x, y, val) {
            this.board[this.getBoardIdx(x,y)] = val;
        };
/* 91 needs undefined, incomplete: false */
__Hibernation__.obj_ref[91]=function (x, y, p) {
            var me = this;
            p.eachdo(function(i) {
                var newX = p[i][0] + x;
                var newY = p[i][1] + y;
                me.markBoardAt(newX,newY,1);
            });
        };
/* 92 needs undefined, incomplete: false */
__Hibernation__.obj_ref[92]=function () {
            return this.bTest(/IE/);
        };
/* 93 needs undefined, incomplete: false */
__Hibernation__.obj_ref[93]=function () {
            return this.bTest(/Firefox/);
        };
/* 94 needs undefined, incomplete: false */
__Hibernation__.obj_ref[94]=function () {
            return this.bTest(/Safari/);
        };
/* 95 needs undefined, incomplete: false */
__Hibernation__.obj_ref[95]=function (rgx) {
            return rgx.test(navigator.userAgent);
        };
/* 96 needs undefined, incomplete: false */
__Hibernation__.obj_ref[96]=[1000,40,5];
/* 97 needs undefined, incomplete: false */
__Hibernation__.obj_ref[97]=[2000,80,10];
/* 98 needs undefined, incomplete: false */
__Hibernation__.obj_ref[98]=[4000,120,15];
/* 99 needs undefined, incomplete: false */
__Hibernation__.obj_ref[99]=[8000,160,20];
/* 100 needs undefined, incomplete: false */
__Hibernation__.obj_ref[100]=[16000,200,25];
/* 101 needs undefined, incomplete: false */
__Hibernation__.obj_ref[101]=[32000,240,30];
/* 102 needs undefined, incomplete: false */
__Hibernation__.obj_ref[102]=[64000,280,35];
/* 103 needs undefined, incomplete: false */
__Hibernation__.obj_ref[103]=[128000,320,40];
/* 104 needs undefined, incomplete: false */
__Hibernation__.obj_ref[104]=[256000,360,45];
/* 105 needs undefined, incomplete: false */
__Hibernation__.obj_ref[105]=[512000,400,50];
/* 1 needs [2,3,39,14,40,4,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105], incomplete: false */
__Hibernation__.obj_ref[1]={
"board":__Hibernation__.obj_ref[2],
"boardDiv":null,
"canvas":undefined /* lazy init */,
"pSize":20,
"canvasHeight":440,
"canvasWidth":220,
"boardHeight":22,
"boardWidth":11,
"spawnX":4,
"spawnY":1,
"shapes":__Hibernation__.obj_ref[3],
"tempShapes":__Hibernation__.obj_ref[39],
"curShape":__Hibernation__.obj_ref[14],
"curShapeIndex":2,
"curX":4,
"curY":13,
"curSqs":__Hibernation__.obj_ref[40],
"nextShape":__Hibernation__.obj_ref[4],
"nextShapeDisplay":undefined /* lazy init */,
"nextShapeIndex":0,
"sqs":__Hibernation__.obj_ref[41],
"score":5,
"scoreDisplay":undefined /* lazy init */,
"level":1,
"levelDisplay":undefined /* lazy init */,
"numLevels":10,
"time":3,
"maxTime":1000,
"timeDisplay":undefined /* lazy init */,
"isActive":1,
"curComplete":false,
"timer":undefined /* lazy init */,
"sTimer":null,
"speed":700,
"lines":0,
"log":__Hibernation__.obj_ref[42],
"init":__Hibernation__.obj_ref[43],
"initBoard":__Hibernation__.obj_ref[44],
"initInfo":__Hibernation__.obj_ref[45],
"initShapes":__Hibernation__.obj_ref[46],
"initNextShape":__Hibernation__.obj_ref[47],
"initTempShapes":__Hibernation__.obj_ref[48],
"shiftTempShapes":__Hibernation__.obj_ref[49],
"initTimer":__Hibernation__.obj_ref[50],
"initLevelScores":__Hibernation__.obj_ref[51],
"setInfo":__Hibernation__.obj_ref[52],
"drawNextShape":__Hibernation__.obj_ref[53],
"drawShape":__Hibernation__.obj_ref[54],
"createSquare":__Hibernation__.obj_ref[55],
"removeCur":__Hibernation__.obj_ref[56],
"setCurCoords":__Hibernation__.obj_ref[57],
"bindKeyEvents":__Hibernation__.obj_ref[58],
"toggleControls":__Hibernation__.obj_ref[59],
"bindControlEvents":__Hibernation__.obj_ref[60],
"handleControl":__Hibernation__.obj_ref[61],
"handleKey":__Hibernation__.obj_ref[62],
"whichKey":__Hibernation__.obj_ref[63],
"incTime":__Hibernation__.obj_ref[64],
"incScore":__Hibernation__.obj_ref[65],
"incLevel":__Hibernation__.obj_ref[66],
"incLines":__Hibernation__.obj_ref[67],
"calcScore":__Hibernation__.obj_ref[68],
"checkScore":__Hibernation__.obj_ref[69],
"gameOver":__Hibernation__.obj_ref[70],
"play":__Hibernation__.obj_ref[71],
"togglePause":__Hibernation__.obj_ref[72],
"clearTimers":__Hibernation__.obj_ref[73],
"move":__Hibernation__.obj_ref[74],
"rotate":__Hibernation__.obj_ref[75],
"checkMove":__Hibernation__.obj_ref[76],
"isCollision":__Hibernation__.obj_ref[77],
"isOB":__Hibernation__.obj_ref[78],
"getRowState":__Hibernation__.obj_ref[79],
"checkRows":__Hibernation__.obj_ref[80],
"shiftRow":__Hibernation__.obj_ref[81],
"emptyBoardRow":__Hibernation__.obj_ref[82],
"removeRow":__Hibernation__.obj_ref[83],
"removeBlock":__Hibernation__.obj_ref[84],
"setBlock":__Hibernation__.obj_ref[85],
"isAt":__Hibernation__.obj_ref[86],
"getPos":__Hibernation__.obj_ref[87],
"getBoardIdx":__Hibernation__.obj_ref[88],
"boardPos":__Hibernation__.obj_ref[89],
"markBoardAt":__Hibernation__.obj_ref[90],
"markBoardShape":__Hibernation__.obj_ref[91],
"isIE":__Hibernation__.obj_ref[92],
"isFirefox":__Hibernation__.obj_ref[93],
"isSafari":__Hibernation__.obj_ref[94],
"bTest":__Hibernation__.obj_ref[95],
"linesDisplay":undefined /* lazy init */,
"level1":__Hibernation__.obj_ref[96],
"level2":__Hibernation__.obj_ref[97],
"level3":__Hibernation__.obj_ref[98],
"level4":__Hibernation__.obj_ref[99],
"level5":__Hibernation__.obj_ref[100],
"level6":__Hibernation__.obj_ref[101],
"level7":__Hibernation__.obj_ref[102],
"level8":__Hibernation__.obj_ref[103],
"level9":__Hibernation__.obj_ref[104],
"level10":__Hibernation__.obj_ref[105],
"controls":undefined /* lazy init */,
"pTimer":undefined /* lazy init */};
/* 0 needs [1], incomplete: false */
__Hibernation__.obj_ref[0]=(function(){
/* CLOSURE */
var me = __Hibernation__.obj_ref[1];
/* SELF CLOSURE */
var tLoop = function () {
                    me.incTime();
                    me.timer = setTimeout(tLoop,2000);
                };
return tLoop;
})();
/* 106 needs [1], incomplete: false */
__Hibernation__.obj_ref[106]=(function(){
/* CLOSURE */
var me = __Hibernation__.obj_ref[1];
/* SELF CLOSURE */
var gameLoop = function () {
                me.move('D');
                if(me.curComplete) {
                    me.markBoardShape(me.curX,me.curY,me.curShape);
                    me.curSqs.eachdo(function() {
                        me.sqs.push(this);
                    });
                    me.calcScore({shape:true});
                    me.checkRows();
                    me.checkScore();
                    me.initShapes();
                    me.play();
                } else {
                    me.pTimer = setTimeout(gameLoop,me.speed);
                }
            };
return gameLoop;
})();
/* 107 needs undefined, incomplete: false */
__Hibernation__.obj_ref[107]=function (e) {
    if(e.keyCode===72) { // '72' stands for the 'h' key
        // TODO: The prefix for the output files is always "sample". We can use an uni-directional hash function for the given URL.
        __Hibernation__.SaveState( "sample" ); 
    } };
/* 108 needs [1], incomplete: false */
__Hibernation__.obj_ref[108]=function(){
/* CLOSURE */
var me = __Hibernation__.obj_ref[1];
return function (e) {
                me.handleKey(e);
            };
};
/* 109 needs [1], incomplete: false */
__Hibernation__.obj_ref[109]=function(){
/* CLOSURE */
var me = __Hibernation__.obj_ref[1];
return function (e) {
                    me.handleControl(e);
                };
};
// User defined global objects

// DOM Objects Mapping
__Hibernation__.obj_ref[1].canvas = __Hibernation__.DomTree[17];
__Hibernation__.obj_ref[1].curSqs[0] = __Hibernation__.DomTree[22];
__Hibernation__.obj_ref[1].curSqs[1] = __Hibernation__.DomTree[23];
__Hibernation__.obj_ref[1].curSqs[2] = __Hibernation__.DomTree[24];
__Hibernation__.obj_ref[1].curSqs[3] = __Hibernation__.DomTree[25];
__Hibernation__.obj_ref[1].nextShapeDisplay = __Hibernation__.DomTree[27];
__Hibernation__.obj_ref[1].sqs[0] = __Hibernation__.DomTree[18];
__Hibernation__.obj_ref[1].sqs[1] = __Hibernation__.DomTree[19];
__Hibernation__.obj_ref[1].sqs[2] = __Hibernation__.DomTree[20];
__Hibernation__.obj_ref[1].sqs[3] = __Hibernation__.DomTree[21];
__Hibernation__.obj_ref[1].scoreDisplay = __Hibernation__.DomTree[37];
__Hibernation__.obj_ref[1].levelDisplay = __Hibernation__.DomTree[33];
__Hibernation__.obj_ref[1].timeDisplay = __Hibernation__.DomTree[39];
__Hibernation__.obj_ref[1].linesDisplay = __Hibernation__.DomTree[35];
__Hibernation__.obj_ref[1].controls = __Hibernation__.DomTree[40];
__Hibernation__.obj_ref[1].timer=setTimeout(__Hibernation__.obj_ref[0], 1290.322021484375);
__Hibernation__.obj_ref[1].pTimer=setTimeout(__Hibernation__.obj_ref[106], 294.824951171875);
__Hibernation__.DomTree[0].addEventListener("keydown",  __Hibernation__.obj_ref[107], false);
__Hibernation__.DomTree[0].addEventListener("keydown",  __Hibernation__.obj_ref[108](), false);
__Hibernation__.DomTree[40].addEventListener("click",  __Hibernation__.obj_ref[109](), false);
Array.prototype.eachdo = function (fn) {
        for (var i = 0;i<this.length;i++) {
            fn.call(this[i],i);
        }
    };
Array.prototype.remDup = function () {
        var temp = [];
        for(var i=0; i<this.length; i++) {
          var bool = true;
            for(var j=i+1; j<this.length; j++) {
                if(this[i] === this[j]) {bool = false;}     
            }   
            if(bool === true) {temp.push(this[i]);}
        }
        return temp;
    };
